# CSCS Storage Proxy Configuration
# This configuration is used by the waldur_storage_proxy API service

# Waldur API Connection Settings
waldur_api:
  api_url: "http://127.0.0.1:8000/api/"  # URL of Waldur API
  access_token: "e38cd56f1ce5bf4ef35905f2bdcf84f1d7f2cc5e"  # Token to access the Waldur API
  verify_ssl: false  # Whether to verify SSL certificates for Waldur API

# Storage Backend Settings
backend_settings:
  storage_file_system: "lustre"  # Storage file system type (e.g. lustre, gpfs)
  inode_soft_coefficient: 1.33  # Multiplier for soft inode limits
  inode_hard_coefficient: 2.0  # Multiplier for hard inode limits
  use_mock_target_items: false  # Enable mock data for development

# Storage systems configuration - maps storage_system names to offering slugs
# The API will fetch resources from all configured offering slugs
# The storage_system filter should match one of the keys
storage_systems:
  capstor: "capstor"
  vast: "vast"
  iopsstor: "iopsstor"

# Authentication Settings (for API access control)
# These can also be set via environment variables:
# DISABLE_AUTH, CSCS_KEYCLOAK_URL, CSCS_KEYCLOAK_REALM,
# CSCS_KEYCLOAK_CLIENT_ID, CSCS_KEYCLOAK_CLIENT_SECRET
auth:
  disable_auth: false  # Set to true for development only
  keycloak_url: "https://auth-tds.cscs.ch/auth/"
  keycloak_realm: "cscs"
  keycloak_client_id: "YOUR_CLIENT_ID"
  keycloak_client_secret: "YOUR_CLIENT_SECRET"

# HPC User API Configuration (for GID lookup)
hpc_user_api:
  api_url: "https://api-user.hpc-user.tds.cscs.ch"
  client_id: "hpc-user-client"
  client_secret: "hpc-user-secret"
  oidc_token_url: "https://auth-tds.cscs.ch/auth/realms/cscs/protocol/openid-connect/token"
  oidc_scope: "openid profile email"
  socks_proxy: null # Optional SOCKS proxy

# Sentry Error Tracking (Optional)
sentry:
  dsn: "" # Data Source Name for Sentry
  environment: "production" # Environment name: production, staging, development
  traces_sample_rate: 0.1 # Performance monitoring sample rate (0.0 to 1.0)
